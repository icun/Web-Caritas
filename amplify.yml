version: 1
applications:
  - appRoot: client
    frontend:
      phases:
        preBuild:
          commands:
            - echo "Installing dependencies in client directory..."
            - npm ci --prefix client --cache .npm --prefer-offline
        build:
          commands:
            - echo "Building Angular app..."
            - npm run build --prefix client
      artifacts:
        baseDirectory: client/dist/client/browser
        files:
          - '**/*'
      cache:
        paths:
          - client/.npm/**/*
          - client/node_modules/**/*
